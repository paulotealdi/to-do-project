(()=>{"use strict";function e(e){return e.find((e=>!0===e.active))}function t(e){document.querySelector("#modal-background").classList.toggle("closed"),e.classList.toggle("closed")}const o=function(n){const i=function(t){return e(t).todoList}(n),d=e(n);if(null==d)return;const c=document.createElement("div"),r=document.createElement("h3");c.classList.add("priority-div"),r.innerText="High Priority",r.classList.add("priority-title"),c.appendChild(r);const s=document.createElement("div"),a=document.createElement("h3");s.classList.add("priority-div"),a.innerText="Medium Priority",a.classList.add("priority-title"),s.appendChild(a);const l=document.createElement("div"),u=document.createElement("h3");l.classList.add("priority-div"),u.innerText="Low Priority",u.classList.add("priority-title"),l.appendChild(u);const p=document.querySelector("#todos-wrapper");p.innerHTML="";const m=document.createElement("div");m.id="todos-menu-div";const y=document.createElement("h3");y.innerText=d.name,y.classList.add("title");const h=document.createElement("button");h.type="button",h.innerText="Delete finished To-Do's",function(e,t,n){e.addEventListener("click",(()=>{for(let e=0;e<t.length;e++)t[e].finished&&(t.splice(e,1),e--);sessionStorage.setItem("projectList",JSON.stringify(n)),o(n)}))}(h,i,n);const L=document.createElement("span");if(L.innerText=`${i.length} ToDo's in this project`,m.appendChild(y),m.appendChild(h),m.appendChild(L),p.appendChild(m),0===i.length){const e=document.createElement("h3");e.id="empty-text",e.innerText="Empty To-Do list!",p.appendChild(e)}i.forEach(((e,d)=>{const r=document.createElement("div");r.classList.add("todo-div");const a=document.createElement("div"),u=document.createElement("h3");a.classList.add("title"),a.classList.add("todo-title-div");const m=document.createElement("div"),y=document.createElement("p");m.classList.add("todo-description-div");const h=document.createElement("div"),L=document.createElement("span");h.classList.add("todo-duedate-div");const v=document.createElement("input");v.type="checkbox",v.classList.add("todo-checkbox"),function(e,t,o){e.addEventListener("change",(e=>{t.finished=!t.finished,e.target.parentNode.classList.toggle("finished-todo"),sessionStorage.setItem("projectList",JSON.stringify(o))})),e.addEventListener("click",(e=>e.stopPropagation()))}(v,e,n);const E=document.createElement("span");E.innerText="X",E.classList.add("close-button"),E.classList.add("delete-todo-button"),function(e,t,n,i){e.addEventListener("click",(e=>{e.stopPropagation(),t.splice(i,1),sessionStorage.setItem("projectList",JSON.stringify(n)),o(n)}))}(E,i,n,d),e.finished&&(r.classList.add("finished-todo"),v.checked=!0),u.innerText=e.title,y.innerText=e.description,L.innerText=`Duedate: ${e.duedate}`,a.appendChild(u),m.appendChild(y),h.appendChild(L),r.appendChild(v),r.appendChild(a),r.appendChild(m),r.appendChild(h),r.appendChild(E),"High"===e.priority?c.appendChild(r):"Medium"===e.priority?s.appendChild(r):"Low"===e.priority&&l.appendChild(r),r.addEventListener("click",(()=>function(e,o){const n=document.querySelector("#change-todo-wrapper");n.setAttribute("data-id",o);const i=document.querySelector("#todo-title-edit"),d=document.querySelector("#todo-description-edit"),c=document.querySelector("#todo-priority-edit"),r=e.title,s=e.description,a=e.priority;i.value=r,d.value=s,c.value=a,t(n)}(e,d))),p.appendChild(c),p.appendChild(s),p.appendChild(l)}))},n=function(){const e=document.querySelector("#todos-wrapper");document.querySelector("#create-todo").disabled=!0,e.innerHTML="";const t=document.createElement("h3");t.innerText="Select or create a project to show it's To-Do's!",t.id="default-screen-text",e.appendChild(t)},i=function t(i){const d=document.querySelector("#projects");d.innerHTML="",function(e){return e.map((e=>e.name))}(i).forEach(((e,o)=>{const c=document.createElement("div");c.id=o;const r=document.createElement("span");r.innerText="X",r.classList.add("delete-project-button"),r.classList.add("close-button"),r.addEventListener("click",(e=>{e.stopPropagation(),!0===i[o].active&&(i[o].active=!1,n()),i.splice(o,1),sessionStorage.setItem("projectList",JSON.stringify(i)),t(i)})),c.classList.add("project-div");const s=document.createElement("span");s.innerText=e,c.appendChild(s),c.appendChild(r),d.appendChild(c)})),function(t){document.querySelectorAll(".project-div").forEach((n=>{n.addEventListener("click",(()=>{const i=e(t);void 0!==i&&(i.active=!1),t[n.id].active=!0,o(t),document.querySelector("#create-todo").disabled=!1,sessionStorage.setItem("projectList",JSON.stringify(t))}))}))}(i)},d=JSON.parse(sessionStorage.getItem("projectList"))||[{name:"default",active:!1,todoList:[]}];document.querySelector("#submit-todo").addEventListener("click",(()=>{!function(){const t={title:document.querySelector("#todo-title").value||"Empty ðŸ˜”",description:document.querySelector("#todo-description").value||"Empty ðŸ˜”",duedate:document.querySelector("#todo-duedate").value||"Empty ðŸ˜”",priority:document.querySelector("#todo-priority").value||"Empty ðŸ˜”",project:"default",finished:!1};e(d).todoList.push(t),sessionStorage.setItem("projectList",JSON.stringify(d))}(),o(d)})),document.querySelector("#submit-project").addEventListener("click",(()=>{!function(){const e={name:document.querySelector("#project-name").value||"Empty ðŸ˜”",active:!1,todoList:[]};d.push(e),sessionStorage.setItem("projectList",JSON.stringify(d))}(),i(d)})),document.querySelector("#change-todo").addEventListener("click",(t=>{const n=t.target.parentNode.getAttribute("data-id");!function(e,t){const o=document.querySelector("#todo-title-edit"),n=document.querySelector("#todo-description-edit"),i=document.querySelector("#todo-priority-edit"),d=document.querySelector("#todo-duedate-edit");e[t].title=o.value||"Empty ðŸ˜”",e[t].description=n.value||"Empty ðŸ˜”",e[t].priority=i.value,e[t].duedate=d.value||"Empty ðŸ˜”"}(e(d).todoList,n),o(d),sessionStorage.setItem("projectList",JSON.stringify(d))})),i(d),void 0!==e(d)?o(d):n(),function(){const e=document.querySelector("#create-todo-wrapper");document.querySelector("#create-todo").addEventListener("click",(()=>t(e)))}(),function(){const e=document.querySelector("#create-project"),o=document.querySelector("#create-project-wrapper");e.addEventListener("click",(()=>t(o)))}(),document.querySelectorAll(".close-button-modal").forEach((e=>{e.addEventListener("click",(e=>{t(e.target.parentNode)}))}))})();