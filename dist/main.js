(()=>{"use strict";function e(e){return e.find((e=>!0===e.active))}function t(e){document.querySelector("#modal-background").classList.toggle("closed"),e.classList.toggle("closed")}const o=function(o){const d=function(t){return e(t).todoList}(o),n=e(o);if(null==n)return;const i=document.createElement("div"),c=document.createElement("h3");i.classList.add("priority-div"),c.innerText="High Priority",i.appendChild(c);const r=document.createElement("div"),s=document.createElement("h3");r.classList.add("priority-div"),s.innerText="Medium Priority",r.appendChild(s);const a=document.createElement("div"),l=document.createElement("h3");a.classList.add("priority-div"),l.innerText="Low Priority",a.appendChild(l);const u=document.querySelector("#todos-wrapper");u.innerHTML="";const p=document.createElement("div");p.id="todos-menu-div";const m=document.createElement("h3");m.innerText=n.name,m.classList.add("title");const y=document.createElement("span");if(y.innerText=`${d.length} ToDo's in this project`,p.appendChild(m),p.appendChild(y),u.appendChild(p),0===d.length){const e=document.createElement("h3");e.id="empty-text",e.innerText="Empty To-Do list!",u.appendChild(e)}d.forEach(((e,d)=>{const n=document.createElement("div");n.classList.add("todo-div");const c=document.createElement("div"),s=document.createElement("h3");c.classList.add("title"),c.classList.add("todo-title-div");const l=document.createElement("div"),p=document.createElement("p");l.classList.add("todo-description-div");const m=document.createElement("div"),y=document.createElement("span");m.classList.add("todo-duedate-div");const h=document.createElement("input");h.type="checkbox",h.classList.add("todo-checkbox"),h.addEventListener("change",(t=>{t.stopPropagation(),e.finished=!e.finished,t.target.parentNode.classList.toggle("finished-todo"),sessionStorage.setItem("projectList",JSON.stringify(o))})),e.finished&&(n.classList.add("finished-todo"),h.checked=!0),s.innerText=e.title,p.innerText=e.description,y.innerText=`Duedate: ${e.duedate}`,c.appendChild(s),l.appendChild(p),m.appendChild(y),n.appendChild(h),n.appendChild(c),n.appendChild(l),n.appendChild(m),"High"===e.priority?i.appendChild(n):"Medium"===e.priority?r.appendChild(n):"Low"===e.priority&&a.appendChild(n),n.addEventListener("click",(()=>function(e,o){const d=document.querySelector("#change-todo-wrapper");d.setAttribute("data-id",o);const n=document.querySelector("#todo-title-edit"),i=document.querySelector("#todo-description-edit"),c=document.querySelector("#todo-priority-edit"),r=e.title,s=e.description,a=e.priority;n.value=r,i.value=s,c.value=a,t(d)}(e,d))),u.appendChild(i),u.appendChild(r),u.appendChild(a)}))},d=function(){const e=document.querySelector("#todos-wrapper");document.querySelector("#create-todo").disabled=!0,e.innerHTML="";const t=document.createElement("h3");t.innerText="Select or create a project to show it's To-Do's!",t.id="default-screen-text",e.appendChild(t)},n=function t(n){const i=document.querySelector("#projects");i.innerHTML="",function(e){return e.map((e=>e.name))}(n).forEach(((e,o)=>{const c=document.createElement("div");c.id=o;const r=document.createElement("span");r.innerText="X",r.classList.add("delete-project-button"),r.classList.add("close-button"),r.addEventListener("click",(e=>{e.stopPropagation(),!0===n[o].active&&(n[o].active=!1,d()),n.splice(o,1),t(n)})),c.classList.add("project-div");const s=document.createElement("span");s.innerText=e,c.appendChild(s),c.appendChild(r),i.appendChild(c)})),function(t){document.querySelectorAll(".project-div").forEach((d=>{d.addEventListener("click",(d=>{const n=d.target.id,i=e(t);void 0!==i&&(i.active=!1),t[n].active=!0,o(t),document.querySelector("#create-todo").disabled=!1,sessionStorage.setItem("projectList",JSON.stringify(t))}))}))}(n)},i=JSON.parse(sessionStorage.getItem("projectList"))||[{name:"default",active:!1,todoList:[]},{name:"main",active:!1,todoList:[]}];document.querySelector("#submit-todo").addEventListener("click",(()=>{!function(){const t={title:document.querySelector("#todo-title").value||"Empty ğŸ˜”",description:document.querySelector("#todo-description").value||"Empty ğŸ˜”",duedate:document.querySelector("#todo-duedate").value||"Empty ğŸ˜”",priority:document.querySelector("#todo-priority").value||"Empty ğŸ˜”",project:"default",finished:!1};e(i).todoList.push(t),sessionStorage.setItem("projectList",JSON.stringify(i))}(),o(i)})),document.querySelector("#submit-project").addEventListener("click",(()=>{!function(){const e={name:document.querySelector("#project-name").value||"Empty ğŸ˜”",active:!1,todoList:[]};i.push(e),sessionStorage.setItem("projectList",JSON.stringify(i))}(),n(i)})),document.querySelector("#change-todo").addEventListener("click",(t=>{const d=t.target.parentNode.getAttribute("data-id");!function(e,t){const o=document.querySelector("#todo-title-edit"),d=document.querySelector("#todo-description-edit"),n=document.querySelector("#todo-priority-edit"),i=document.querySelector("#todo-duedate-edit");e[t].title=o.value||"Empty ğŸ˜”",e[t].description=d.value||"Empty ğŸ˜”",e[t].priority=n.value,e[t].duedate=i.value||"Empty ğŸ˜”"}(e(i).todoList,d),o(i),sessionStorage.setItem("projectList",JSON.stringify(i))})),n(i),void 0!==e(i)?o(i):d(),function(){const e=document.querySelector("#create-todo-wrapper");document.querySelector("#create-todo").addEventListener("click",(()=>t(e)))}(),function(){const e=document.querySelector("#create-project"),o=document.querySelector("#create-project-wrapper");e.addEventListener("click",(()=>t(o)))}(),document.querySelectorAll(".close-button-modal").forEach((e=>{e.addEventListener("click",(e=>{t(e.target.parentNode)}))}))})();